/**
     * @author: 
     *    jiangrun002
     * @version: 
     *    v0.0.1
     * @license:
     *    Copyright 2017, hiknowledge. All rights reserved.
     */

var IndexService=function(){function t(){this.init()}return t.prototype.init=function(){this.initGraph()},t.prototype.initGraph=function(){var t=this,e=graphConfig.centerId,i={selector:".graph-container",startInfo:{id:e},selectedDistance:graphConfig.selectedDistance,nodeColors:graphConfig.nodeColors,images:graphConfig.images,textColors:graphConfig.textColors,enableAutoUpdateStyle:!1,schema:schema,infobox:!1,tgc2Settings:{page:{enable:!1},prompt:{enable:!1},crumb:{enable:!1},find:{enable:!1},legend:{legendDraw:function(e,i){i.html("");for(var o in e){var n=$('<div class="tgc2-legend-item tgc2-legend-item-'+o+'"></div>').data({key:o,value:e[o]}),a=n.html(t.legend(schema,o,e[o]));i.append(a)}},onClick:$.noop,onDblclick:$.noop,onMouseEnter:$.noop,onMouseLeave:$.noop},netChart:{linkDefaultColor:"#202364",settings:{filters:{nodeFilter:function(e){return t.nodeFilter(e,t.graph)},linkFilter:function(e){return t.linkFilter(e)}},nodeMenu:{contentsFunction:function(t){var e="";for(var i in t.extra)e+='<div class="info-label">'+i+'</div><div class="info-value">'+t.extra[i]+"</div>";return'<div class="info-title-container"><div class="info-title">'+t.name+'</div></div><div class="info-detail">'+e+"</div>"},buttons:[]},navigation:{mode:"focusnodes",focusNodeExpansionRadius:2,numberOfFocusNodes:1,initialNodes:[e+""]},style:{link:{length:2},linkLabel:{textStyle:{fillColor:"#0b8eff",font:"12px wei"},backgroundStyle:{fillColor:"#202364"},scaleWithZoom:!1},linkDetailMinZoom:12,nodeDetailMinZoom:0,nodeLabel:{padding:6,textStyle:{fillColor:"#fff"},backgroundStyle:{fillColor:"rgba(0,0,0,.5)"},scaleWithSize:!1,scaleWithZoom:!1},nodeStyleFunction:function(e){t.nodeStyleFunction(t.graph.nodeSettings,e)}},info:{nodeContentsFunction:$.noop}}},loader:function(e,i){t.loader(t.graph.loaderSettings,schema,i)}}};this.graph=new HieknGraphService(i),setTimeout(function(){$(".tgc2-float-toolbar a").attr("tgc2-tooltip","right")},100)},t.prototype.nodeFilter=function(t,e){return e.tgc2.inStart(t.id)||_.indexOf(this.filter.allowTypes,t.classId+"")>=0},t.prototype.linkFilter=function(t){return _.indexOf(this.filter.allowAtts,t.attId+"")>=0},t.prototype.nodeStyleFunction=function(t,e){t.tgc2.nodeStyleFunction(e),e.labelStyle.textStyle.font="14px Microsoft Yahei",e.imageCropping="fit",e.fillColor=e.data.color||"#16263d",e.lineColor="#00b38a",t.tgc2.inStart(e.id)&&(e.radius=1.5*e.radius),t.nodeColors&&t.nodeColors[e.data.classId]&&(e.lineWidth=4,e.lineColor=t.nodeColors[e.data.classId]),e.data.img?e.image=e.data.img:t.images&&t.images[e.data.classId]&&(e.image=t.images[e.data.classId].normal),t.textColors&&t.textColors[e.data.classId]&&("string"==typeof t.textColors[e.data.classId]?e.labelStyle.textStyle.fillColor=t.textColors[e.data.classId]:e.labelStyle.textStyle.fillColor=t.textColors[e.data.classId].normal);var i=e.label.length;t.textColors[e.data.classId]&&(e.display="roundtext"),e.display=e.data.display||e.display;for(var o=e.label,n=/^[\u4e00-\u9fa5]$/,a=/^[a-zA-Z]$/,l=!0,r=1;r<o.length-1;r++){var s=o.charAt(r),d=o.charAt(r+1);(n.test(s)&&a.test(d)||a.test(s)&&n.test(d))&&(o=o.substring(0,r+1)+" "+o.substring(r+1),r++),n.test(s)||(l=!1)}e.label=o.trim(),l&&e.label.indexOf(" ")<0&&i>12&&(e.label=e.label.substring(0,12)+" "+e.label.substring(12))},t.prototype.loader=function(t,e,i){var o=(t.tgc2.startInfo.id,$.extend(!0,{},graphData));if(t.tgc2Filter){var n=this.filter?this.filter.distance:0;this.filter=t.tgc2Filter.getFilterOptions(),n!=this.filter.distance&&t.tgc2.netChart.replaceSettings({navigation:{focusNodeExpansionRadius:this.filter.distance}})}i(this.graph.sdkUtils.dealGraphData(o,e))},t.prototype.legend=function(t,e,i){var o={};for(var n in t.types){var a=t.types[n];o[a.k]=a.v}return'<i style="border-color: '+i+'"></i><span title="'+o[e]+'">'+o[e]+"</span>"},t}();$(function(){app.indexService=new IndexService});