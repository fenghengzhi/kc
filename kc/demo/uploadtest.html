<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
    <!--<link rel="stylesheet" href="../lib/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="../lib/hiekn-prompt.css">-->
    <link rel="stylesheet" href="../lib/iconfont.css">
    <link rel="stylesheet" href="../common/src/less/hieknui.css">
    <!--<link rel="stylesheet" href="../lib/hiekn-prompt.css">-->
    <link rel="stylesheet" href="src/less/header.css">

    <script type="text/javascript" src="../lib/browser-polyfill.js"></script>
    <script type="text/javascript" src="../lib/jquery.min.js"></script>
    <script type="text/javascript" src="../lib/jquery.hieknjs.min.js"></script>
    <!--<script type="text/javascript" src="../lib/bootstrap.min.js"></script>-->
    <script type="text/javascript" src="../lib/layer.js"></script>
    <script type="text/javascript" src="../lib/hieknui.min.js"></script>
    <!--<script type="text/javascript" src="../lib/echarts.min.js"></script>-->
    <!--<script type="text/javascript" src="../lib/hiekn-prompt.js"></script>-->
    <!--<script type="text/javascript" src="../assets/zoomcharts/zoomcharts.js"></script>-->
    <script type="text/javascript" src="../common/src/js/config.js"></script>
    <script type="text/javascript" src="../common/src/js/ajax.js"></script>
    <script type="text/javascript" src="../common/src/js/common.js"></script>
</head>
<body>

<label class="hu-btn btn-primary" id="upload-btn">
    +上传测试
    <input type="file" hidden id="upload-input">
</label>
<script>
    $('#upload-input').change(function () {

        var file = this.files[0];
        var formData = new FormData();
        formData.append('fileData', file);
//        console.log($.getJSON('/angelnode_ws/common/upload',formData));
        $.ajax({
            url: '/hk_ws/api/common/upload',
            type: 'POST',
            cache: false,
            data: formData,
            processData: false,
            contentType: false,
            dataType: "json"
        }).done(function (res) {
            console.log('done',res,res.data.rsData[0]);
            $('body').append(`<a href="http://angelnode.qiniudn.com/${res.data.rsData[0]}">上传的文件</a>`)
        }).fail(function (res) {
            console.log('fail',res);
        });

//        var reader = new FileReader();
//        reader.onload = function () {
//
//
//        };
//        reader.readAsDataURL(file);

    })
</script>
</body>
</html>